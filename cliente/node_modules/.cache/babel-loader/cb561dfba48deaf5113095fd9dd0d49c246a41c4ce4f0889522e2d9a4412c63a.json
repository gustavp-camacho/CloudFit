{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Windows 11\\\\Desktop\\\\CloudFit\\\\cliente\\\\src\\\\pages\\\\Usuarios\\\\componentes\\\\citas.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport './citas.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AppointmentBooking = () => {\n  _s();\n  var _employees$selectedSe, _employees$selectedSe2;\n  const [selectedService, setSelectedService] = useState('');\n  const [selectedDate, setSelectedDate] = useState('');\n  const [selectedTime, setSelectedTime] = useState('');\n  const [selectedEmployee, setSelectedEmployee] = useState('');\n  const [appointments, setAppointments] = useState([]);\n  const [employees, setEmployees] = useState({});\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n  const [busySlots, setBusySlots] = useState([]);\n  const services = [{\n    id: 'barbero',\n    name: 'Servicio de Barbería',\n    icon: '✂️',\n    duration: 30\n  }, {\n    id: 'estilista',\n    name: 'Servicio de Estilista',\n    icon: '💇',\n    duration: 45\n  }, {\n    id: 'coach',\n    name: 'Entrenamiento Personal',\n    icon: '🏋️',\n    duration: 60\n  }];\n  const timeSlots = ['08:00', '08:30', '09:00', '09:30', '10:00', '10:30', '11:00', '11:30', '12:00', '12:30', '13:00', '13:30', '14:00', '14:30', '15:00', '15:30', '16:00', '16:30', '17:00', '17:30', '18:00', '18:30', '19:00', '19:30'];\n\n  // Cargar datos al iniciar\n  useEffect(() => {\n    fetchEmployees();\n    fetchAppointments();\n  }, []);\n\n  // Cargar horarios ocupados cuando cambie empleado o fecha\n  useEffect(() => {\n    if (selectedEmployee && selectedDate) {\n      fetchBusySlots();\n    }\n  }, [selectedEmployee, selectedDate]);\n\n  // Limpiar mensajes después de 5 segundos\n  useEffect(() => {\n    if (success || error) {\n      const timer = setTimeout(() => {\n        setSuccess('');\n        setError('');\n      }, 5000);\n      return () => clearTimeout(timer);\n    }\n  }, [success, error]);\n  const fetchEmployees = async () => {\n    try {\n      const token = localStorage.getItem('token');\n      const response = await fetch('http://18.219.156.200:5000/api/empleados/all', {\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        }\n      });\n      const data = await response.json();\n      if (response.ok && data.success) {\n        // Organizar empleados por posición\n        const employeesByPosition = {\n          barbero: [],\n          estilista: [],\n          coach: []\n        };\n        data.employees.forEach(employee => {\n          if (employee.status === 'active') {\n            const position = employee.position.toLowerCase();\n            if (employeesByPosition[position]) {\n              employeesByPosition[position].push({\n                id: employee.employeeId,\n                name: employee.username,\n                specialty: getSpecialtyByPosition(employee.position),\n                rating: generateRating(),\n                position: employee.position,\n                phone: employee.phone\n              });\n            }\n          }\n        });\n        setEmployees(employeesByPosition);\n      } else {\n        setError('Error al cargar empleados');\n      }\n    } catch (error) {\n      console.error('Error fetching employees:', error);\n      setError('Error de conexión al cargar empleados');\n    }\n  };\n  const fetchAppointments = async () => {\n    try {\n      const token = localStorage.getItem('token');\n      const response = await fetch('http://18.219.156.200:5000/api/citas/my-appointments', {\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        }\n      });\n      const data = await response.json();\n      if (response.ok && data.success) {\n        setAppointments(data.appointments || []);\n      } else {\n        console.error('Error al cargar citas:', data.message);\n      }\n    } catch (error) {\n      console.error('Error fetching appointments:', error);\n    }\n  };\n  const fetchBusySlots = async () => {\n    try {\n      const token = localStorage.getItem('token');\n      const response = await fetch(`http://18.219.156.200:5000/api/citas/employee/${selectedEmployee}/busy-slots?date=${selectedDate}`, {\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        }\n      });\n      const data = await response.json();\n      if (response.ok && data.success) {\n        setBusySlots(data.busySlots || []);\n      } else {\n        setBusySlots([]);\n      }\n    } catch (error) {\n      console.error('Error fetching busy slots:', error);\n      setBusySlots([]);\n    }\n  };\n  const getSpecialtyByPosition = position => {\n    const specialties = {\n      'Barbero': ['Cortes clásicos', 'Barba y bigote', 'Cortes modernos'][Math.floor(Math.random() * 3)],\n      'Estilista': ['Cortes modernos', 'Coloración', 'Peinados especiales'][Math.floor(Math.random() * 3)],\n      'Coach': ['Fuerza y resistencia', 'Cardio y pérdida de peso', 'Rehabilitación'][Math.floor(Math.random() * 3)]\n    };\n    return specialties[position] || 'Servicio general';\n  };\n  const generateRating = () => {\n    return (4.5 + Math.random() * 0.5).toFixed(1);\n  };\n  const getAvailableDates = () => {\n    const dates = [];\n    const today = new Date();\n    for (let i = 0; i < 14; i++) {\n      const date = new Date(today);\n      date.setDate(today.getDate() + i);\n      dates.push(date.toISOString().split('T')[0]);\n    }\n    return dates;\n  };\n  const formatDate = dateString => {\n    const date = new Date(dateString);\n    const today = new Date();\n    const tomorrow = new Date(today);\n    tomorrow.setDate(today.getDate() + 1);\n\n    // Formatear para mostrar\n    const day = date.getDate();\n    const month = date.toLocaleDateString('es-ES', {\n      month: 'short'\n    });\n    const weekday = date.toLocaleDateString('es-ES', {\n      weekday: 'short'\n    });\n\n    // Casos especiales\n    if (date.toDateString() === today.toDateString()) {\n      return {\n        day: 'Hoy',\n        date: day,\n        month: month,\n        full: 'Hoy'\n      };\n    } else if (date.toDateString() === tomorrow.toDateString()) {\n      return {\n        day: 'Mañana',\n        date: day,\n        month: month,\n        full: 'Mañana'\n      };\n    } else {\n      return {\n        day: weekday,\n        date: day,\n        month: month,\n        full: `${weekday} ${day} de ${month}`\n      };\n    }\n  };\n  const isTimeSlotAvailable = time => {\n    return !busySlots.includes(time);\n  };\n  const handleBookAppointment = async () => {\n    if (!selectedService || !selectedDate || !selectedTime || !selectedEmployee) {\n      setError('Por favor, completa todos los campos');\n      return;\n    }\n    try {\n      setLoading(true);\n      setError('');\n      setSuccess('');\n\n      // Obtener información del servicio seleccionado\n      const service = services.find(s => s.id === selectedService);\n      const appointmentData = {\n        serviceType: selectedService,\n        serviceName: service.name,\n        serviceDuration: service.duration,\n        employeeId: selectedEmployee,\n        date: selectedDate,\n        time: selectedTime\n      };\n      console.log('Enviando datos de la cita:', appointmentData); // Para debug\n\n      const token = localStorage.getItem('token');\n      const response = await fetch('http://18.219.156.200:5000/api/citas/book', {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(appointmentData)\n      });\n      const data = await response.json();\n      console.log('Respuesta del servidor:', data); // Para debug\n\n      if (response.ok && data.success) {\n        setSuccess('¡Cita agendada exitosamente!');\n\n        // Recargar citas y horarios ocupados\n        await fetchAppointments();\n        await fetchBusySlots();\n\n        // Limpiar formulario\n        setSelectedService('');\n        setSelectedDate('');\n        setSelectedTime('');\n        setSelectedEmployee('');\n        setBusySlots([]);\n      } else {\n        setError(data.message || 'Error al agendar la cita');\n      }\n    } catch (error) {\n      console.error('Error booking appointment:', error);\n      setError('Error de conexión al agendar la cita');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const cancelAppointment = async appointmentId => {\n    if (!window.confirm('¿Estás seguro de que quieres cancelar esta cita?')) {\n      return;\n    }\n    try {\n      setLoading(true);\n      const token = localStorage.getItem('token');\n      const response = await fetch(`http://18.219.156.200:5000/api/citas/appointment/${appointmentId}/cancel`, {\n        method: 'PATCH',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        }\n      });\n      const data = await response.json();\n      if (response.ok && data.success) {\n        setSuccess('Cita cancelada exitosamente');\n        await fetchAppointments();\n        if (selectedEmployee && selectedDate) {\n          await fetchBusySlots();\n        }\n      } else {\n        setError(data.message || 'Error al cancelar la cita');\n      }\n    } catch (error) {\n      console.error('Error canceling appointment:', error);\n      setError('Error de conexión al cancelar la cita');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const getStatusDisplay = status => {\n    const statusMap = {\n      'pending': 'Pendiente',\n      'confirmed': 'Confirmada',\n      'cancelled': 'Cancelada',\n      'completed': 'Completada'\n    };\n    return statusMap[status] || status;\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"appointment-booking\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"booking-header\",\n      children: /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\uD83D\\uDCC5 Agendar Citas\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 321,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 320,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error-message\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 325,\n      columnNumber: 17\n    }, this), success && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"success-message\",\n      children: success\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 326,\n      columnNumber: 19\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"booking-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"booking-form\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Nueva Cita\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Selecciona el servicio:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 334,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"service-options\",\n            children: services.map(service => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `service-card ${selectedService === service.id ? 'selected' : ''}`,\n              onClick: () => {\n                setSelectedService(service.id);\n                setSelectedEmployee('');\n                setSelectedDate('');\n                setSelectedTime('');\n                setBusySlots([]);\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"service-icon\",\n                children: service.icon\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 348,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n                children: service.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 349,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"service-duration\",\n                children: [service.duration, \" min\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 350,\n                columnNumber: 19\n              }, this)]\n            }, service.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 337,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 335,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 333,\n          columnNumber: 11\n        }, this), selectedService && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Selecciona el profesional:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 359,\n            columnNumber: 15\n          }, this), ((_employees$selectedSe = employees[selectedService]) === null || _employees$selectedSe === void 0 ? void 0 : _employees$selectedSe.length) === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"no-employees\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"No hay profesionales disponibles para este servicio\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 362,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 361,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"employee-options\",\n            children: ((_employees$selectedSe2 = employees[selectedService]) === null || _employees$selectedSe2 === void 0 ? void 0 : _employees$selectedSe2.map(employee => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `employee-card ${selectedEmployee === employee.id ? 'selected' : ''}`,\n              onClick: () => {\n                setSelectedEmployee(employee.id);\n                setSelectedDate('');\n                setSelectedTime('');\n                setBusySlots([]);\n              },\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"employee-info\",\n                children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                  children: employee.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 378,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"specialty\",\n                  children: employee.specialty\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 379,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"rating\",\n                  children: [\"\\u2B50 \", employee.rating]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 380,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 377,\n                columnNumber: 23\n              }, this)\n            }, employee.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 367,\n              columnNumber: 21\n            }, this))) || []\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 365,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 358,\n          columnNumber: 13\n        }, this), selectedEmployee && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Selecciona la fecha:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 394,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"date-options\",\n            children: getAvailableDates().map(date => {\n              const formattedDate = formatDate(date);\n              return /*#__PURE__*/_jsxDEV(\"button\", {\n                className: `date-btn ${selectedDate === date ? 'selected' : ''}`,\n                onClick: () => {\n                  setSelectedDate(date);\n                  setSelectedTime('');\n                },\n                title: formattedDate.full,\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"date-content\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"date-day\",\n                    children: formattedDate.day\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 409,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"date-number\",\n                    children: formattedDate.date\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 410,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"date-month\",\n                    children: formattedDate.month\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 411,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 408,\n                  columnNumber: 23\n                }, this)\n              }, date, false, {\n                fileName: _jsxFileName,\n                lineNumber: 399,\n                columnNumber: 21\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 395,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 393,\n          columnNumber: 13\n        }, this), selectedDate && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Selecciona la hora:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 423,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"time-options\",\n            children: timeSlots.map(time => /*#__PURE__*/_jsxDEV(\"button\", {\n              className: `time-btn ${selectedTime === time ? 'selected' : ''} ${!isTimeSlotAvailable(time) ? 'unavailable' : ''}`,\n              onClick: () => setSelectedTime(time),\n              disabled: !isTimeSlotAvailable(time),\n              children: time\n            }, time, false, {\n              fileName: _jsxFileName,\n              lineNumber: 426,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 424,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 422,\n          columnNumber: 13\n        }, this), selectedService && selectedEmployee && selectedDate && selectedTime && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-section\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"confirm-btn\",\n            onClick: handleBookAppointment,\n            disabled: loading,\n            children: loading ? 'Agendando...' : 'Confirmar Cita'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 442,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 441,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 329,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"appointments-list\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: [\"Mis Citas (\", appointments.length, \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 455,\n          columnNumber: 11\n        }, this), appointments.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"no-appointments\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"No tienes citas agendadas\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 458,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 457,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"appointments\",\n          children: appointments.map(appointment => {\n            var _services$find, _appointment$employee;\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"appointment-card\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"appointment-header\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"service-icon\",\n                  children: ((_services$find = services.find(s => s.id === appointment.serviceType)) === null || _services$find === void 0 ? void 0 : _services$find.icon) || '📅'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 465,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"appointment-info\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                    children: appointment.serviceName\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 469,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"employee-name\",\n                    children: [\"con \", (_appointment$employee = appointment.employee) === null || _appointment$employee === void 0 ? void 0 : _appointment$employee.name]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 470,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 468,\n                  columnNumber: 21\n                }, this), appointment.status !== 'cancelled' && /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"cancel-btn\",\n                  onClick: () => cancelAppointment(appointment._id || appointment.id),\n                  disabled: loading,\n                  children: \"\\u2715\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 473,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 464,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"appointment-details\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"detail-item\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"detail-label\",\n                    children: \"\\uD83D\\uDCC5 Fecha:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 485,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"detail-value\",\n                    children: formatDate(appointment.date).full\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 486,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 484,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"detail-item\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"detail-label\",\n                    children: \"\\uD83D\\uDD50 Hora:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 489,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"detail-value\",\n                    children: appointment.time\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 490,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 488,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"detail-item\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"detail-label\",\n                    children: \"\\u23F1\\uFE0F Duraci\\xF3n:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 493,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"detail-value\",\n                    children: [appointment.serviceDuration, \" min\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 494,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 492,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"detail-item\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"detail-label\",\n                    children: \"\\uD83D\\uDCCA Estado:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 497,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: `status ${appointment.status}`,\n                    children: getStatusDisplay(appointment.status)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 498,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 496,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 483,\n                columnNumber: 19\n              }, this)]\n            }, appointment._id || appointment.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 463,\n              columnNumber: 17\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 461,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 454,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 328,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 319,\n    columnNumber: 5\n  }, this);\n};\n_s(AppointmentBooking, \"dI+3sGhVFGMBr35XCE3gYZupX44=\");\n_c = AppointmentBooking;\nexport default AppointmentBooking;\nvar _c;\n$RefreshReg$(_c, \"AppointmentBooking\");","map":{"version":3,"names":["React","useState","useEffect","jsxDEV","_jsxDEV","AppointmentBooking","_s","_employees$selectedSe","_employees$selectedSe2","selectedService","setSelectedService","selectedDate","setSelectedDate","selectedTime","setSelectedTime","selectedEmployee","setSelectedEmployee","appointments","setAppointments","employees","setEmployees","loading","setLoading","error","setError","success","setSuccess","busySlots","setBusySlots","services","id","name","icon","duration","timeSlots","fetchEmployees","fetchAppointments","fetchBusySlots","timer","setTimeout","clearTimeout","token","localStorage","getItem","response","fetch","headers","data","json","ok","employeesByPosition","barbero","estilista","coach","forEach","employee","status","position","toLowerCase","push","employeeId","username","specialty","getSpecialtyByPosition","rating","generateRating","phone","console","message","specialties","Math","floor","random","toFixed","getAvailableDates","dates","today","Date","i","date","setDate","getDate","toISOString","split","formatDate","dateString","tomorrow","day","month","toLocaleDateString","weekday","toDateString","full","isTimeSlotAvailable","time","includes","handleBookAppointment","service","find","s","appointmentData","serviceType","serviceName","serviceDuration","log","method","body","JSON","stringify","cancelAppointment","appointmentId","window","confirm","getStatusDisplay","statusMap","className","children","fileName","_jsxFileName","lineNumber","columnNumber","map","onClick","length","formattedDate","title","disabled","appointment","_services$find","_appointment$employee","_id","_c","$RefreshReg$"],"sources":["C:/Users/Windows 11/Desktop/CloudFit/cliente/src/pages/Usuarios/componentes/citas.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport './citas.css';\r\n\r\nconst AppointmentBooking = () => {\r\n  const [selectedService, setSelectedService] = useState('');\r\n  const [selectedDate, setSelectedDate] = useState('');\r\n  const [selectedTime, setSelectedTime] = useState('');\r\n  const [selectedEmployee, setSelectedEmployee] = useState('');\r\n  const [appointments, setAppointments] = useState([]);\r\n  const [employees, setEmployees] = useState({});\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [success, setSuccess] = useState('');\r\n  const [busySlots, setBusySlots] = useState([]);\r\n\r\n  const services = [\r\n    { id: 'barbero', name: 'Servicio de Barbería', icon: '✂️', duration: 30 },\r\n    { id: 'estilista', name: 'Servicio de Estilista', icon: '💇', duration: 45 },\r\n    { id: 'coach', name: 'Entrenamiento Personal', icon: '🏋️', duration: 60 }\r\n  ];\r\n\r\n  const timeSlots = [\r\n    '08:00', '08:30', '09:00', '09:30', '10:00', '10:30',\r\n    '11:00', '11:30', '12:00', '12:30', '13:00', '13:30',\r\n    '14:00', '14:30', '15:00', '15:30', '16:00', '16:30',\r\n    '17:00', '17:30', '18:00', '18:30', '19:00', '19:30'\r\n  ];\r\n\r\n  // Cargar datos al iniciar\r\n  useEffect(() => {\r\n    fetchEmployees();\r\n    fetchAppointments();\r\n  }, []);\r\n\r\n  // Cargar horarios ocupados cuando cambie empleado o fecha\r\n  useEffect(() => {\r\n    if (selectedEmployee && selectedDate) {\r\n      fetchBusySlots();\r\n    }\r\n  }, [selectedEmployee, selectedDate]);\r\n\r\n  // Limpiar mensajes después de 5 segundos\r\n  useEffect(() => {\r\n    if (success || error) {\r\n      const timer = setTimeout(() => {\r\n        setSuccess('');\r\n        setError('');\r\n      }, 5000);\r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, [success, error]);\r\n\r\n  const fetchEmployees = async () => {\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      const response = await fetch('http://18.219.156.200:5000/api/empleados/all', {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'application/json'\r\n        }\r\n      });\r\n      \r\n      const data = await response.json();\r\n      \r\n      if (response.ok && data.success) {\r\n        // Organizar empleados por posición\r\n        const employeesByPosition = {\r\n          barbero: [],\r\n          estilista: [],\r\n          coach: []\r\n        };\r\n\r\n        data.employees.forEach(employee => {\r\n          if (employee.status === 'active') {\r\n            const position = employee.position.toLowerCase();\r\n            if (employeesByPosition[position]) {\r\n              employeesByPosition[position].push({\r\n                id: employee.employeeId,\r\n                name: employee.username,\r\n                specialty: getSpecialtyByPosition(employee.position),\r\n                rating: generateRating(),\r\n                position: employee.position,\r\n                phone: employee.phone\r\n              });\r\n            }\r\n          }\r\n        });\r\n\r\n        setEmployees(employeesByPosition);\r\n      } else {\r\n        setError('Error al cargar empleados');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching employees:', error);\r\n      setError('Error de conexión al cargar empleados');\r\n    }\r\n  };\r\n\r\n  const fetchAppointments = async () => {\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      const response = await fetch('http://18.219.156.200:5000/api/citas/my-appointments', {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'application/json'\r\n        }\r\n      });\r\n      \r\n      const data = await response.json();\r\n      \r\n      if (response.ok && data.success) {\r\n        setAppointments(data.appointments || []);\r\n      } else {\r\n        console.error('Error al cargar citas:', data.message);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching appointments:', error);\r\n    }\r\n  };\r\n\r\n  const fetchBusySlots = async () => {\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      const response = await fetch(\r\n        `http://18.219.156.200:5000/api/citas/employee/${selectedEmployee}/busy-slots?date=${selectedDate}`,\r\n        {\r\n          headers: {\r\n            'Authorization': `Bearer ${token}`,\r\n            'Content-Type': 'application/json'\r\n          }\r\n        }\r\n      );\r\n      \r\n      const data = await response.json();\r\n      \r\n      if (response.ok && data.success) {\r\n        setBusySlots(data.busySlots || []);\r\n      } else {\r\n        setBusySlots([]);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching busy slots:', error);\r\n      setBusySlots([]);\r\n    }\r\n  };\r\n\r\n  const getSpecialtyByPosition = (position) => {\r\n    const specialties = {\r\n      'Barbero': ['Cortes clásicos', 'Barba y bigote', 'Cortes modernos'][Math.floor(Math.random() * 3)],\r\n      'Estilista': ['Cortes modernos', 'Coloración', 'Peinados especiales'][Math.floor(Math.random() * 3)],\r\n      'Coach': ['Fuerza y resistencia', 'Cardio y pérdida de peso', 'Rehabilitación'][Math.floor(Math.random() * 3)]\r\n    };\r\n    return specialties[position] || 'Servicio general';\r\n  };\r\n\r\n  const generateRating = () => {\r\n    return (4.5 + Math.random() * 0.5).toFixed(1);\r\n  };\r\n\r\n  const getAvailableDates = () => {\r\n    const dates = [];\r\n    const today = new Date();\r\n    for (let i = 0; i < 14; i++) {\r\n      const date = new Date(today);\r\n      date.setDate(today.getDate() + i);\r\n      dates.push(date.toISOString().split('T')[0]);\r\n    }\r\n    return dates;\r\n  };\r\n\r\n  const formatDate = (dateString) => {\r\n    const date = new Date(dateString);\r\n    const today = new Date();\r\n    const tomorrow = new Date(today);\r\n    tomorrow.setDate(today.getDate() + 1);\r\n    \r\n    // Formatear para mostrar\r\n    const day = date.getDate();\r\n    const month = date.toLocaleDateString('es-ES', { month: 'short' });\r\n    const weekday = date.toLocaleDateString('es-ES', { weekday: 'short' });\r\n    \r\n    // Casos especiales\r\n    if (date.toDateString() === today.toDateString()) {\r\n      return {\r\n        day: 'Hoy',\r\n        date: day,\r\n        month: month,\r\n        full: 'Hoy'\r\n      };\r\n    } else if (date.toDateString() === tomorrow.toDateString()) {\r\n      return {\r\n        day: 'Mañana',\r\n        date: day,\r\n        month: month,\r\n        full: 'Mañana'\r\n      };\r\n    } else {\r\n      return {\r\n        day: weekday,\r\n        date: day,\r\n        month: month,\r\n        full: `${weekday} ${day} de ${month}`\r\n      };\r\n    }\r\n  };\r\n\r\n  const isTimeSlotAvailable = (time) => {\r\n    return !busySlots.includes(time);\r\n  };\r\n\r\n  const handleBookAppointment = async () => {\r\n    if (!selectedService || !selectedDate || !selectedTime || !selectedEmployee) {\r\n      setError('Por favor, completa todos los campos');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setLoading(true);\r\n      setError('');\r\n      setSuccess('');\r\n\r\n      // Obtener información del servicio seleccionado\r\n      const service = services.find(s => s.id === selectedService);\r\n      \r\n      const appointmentData = {\r\n        serviceType: selectedService,\r\n        serviceName: service.name,\r\n        serviceDuration: service.duration,\r\n        employeeId: selectedEmployee,\r\n        date: selectedDate,\r\n        time: selectedTime\r\n      };\r\n\r\n      console.log('Enviando datos de la cita:', appointmentData); // Para debug\r\n\r\n      const token = localStorage.getItem('token');\r\n      const response = await fetch('http://18.219.156.200:5000/api/citas/book', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(appointmentData)\r\n      });\r\n\r\n      const data = await response.json();\r\n      console.log('Respuesta del servidor:', data); // Para debug\r\n\r\n      if (response.ok && data.success) {\r\n        setSuccess('¡Cita agendada exitosamente!');\r\n        \r\n        // Recargar citas y horarios ocupados\r\n        await fetchAppointments();\r\n        await fetchBusySlots();\r\n        \r\n        // Limpiar formulario\r\n        setSelectedService('');\r\n        setSelectedDate('');\r\n        setSelectedTime('');\r\n        setSelectedEmployee('');\r\n        setBusySlots([]);\r\n      } else {\r\n        setError(data.message || 'Error al agendar la cita');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error booking appointment:', error);\r\n      setError('Error de conexión al agendar la cita');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const cancelAppointment = async (appointmentId) => {\r\n    if (!window.confirm('¿Estás seguro de que quieres cancelar esta cita?')) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setLoading(true);\r\n      const token = localStorage.getItem('token');\r\n      const response = await fetch(`http://18.219.156.200:5000/api/citas/appointment/${appointmentId}/cancel`, {\r\n        method: 'PATCH',\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'application/json'\r\n        }\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (response.ok && data.success) {\r\n        setSuccess('Cita cancelada exitosamente');\r\n        await fetchAppointments();\r\n        if (selectedEmployee && selectedDate) {\r\n          await fetchBusySlots();\r\n        }\r\n      } else {\r\n        setError(data.message || 'Error al cancelar la cita');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error canceling appointment:', error);\r\n      setError('Error de conexión al cancelar la cita');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const getStatusDisplay = (status) => {\r\n    const statusMap = {\r\n      'pending': 'Pendiente',\r\n      'confirmed': 'Confirmada',\r\n      'cancelled': 'Cancelada',\r\n      'completed': 'Completada'\r\n    };\r\n    return statusMap[status] || status;\r\n  };\r\n\r\n  return (\r\n    <div className=\"appointment-booking\">\r\n      <div className=\"booking-header\">\r\n        <h2>📅 Agendar Citas</h2>\r\n      </div>\r\n\r\n      {/* Mostrar mensajes */}\r\n      {error && <div className=\"error-message\">{error}</div>}\r\n      {success && <div className=\"success-message\">{success}</div>}\r\n\r\n      <div className=\"booking-content\">\r\n        <div className=\"booking-form\">\r\n          <h3>Nueva Cita</h3>\r\n          \r\n          {/* Selección de servicio */}\r\n          <div className=\"form-section\">\r\n            <label>Selecciona el servicio:</label>\r\n            <div className=\"service-options\">\r\n              {services.map(service => (\r\n                <div\r\n                  key={service.id}\r\n                  className={`service-card ${selectedService === service.id ? 'selected' : ''}`}\r\n                  onClick={() => {\r\n                    setSelectedService(service.id);\r\n                    setSelectedEmployee('');\r\n                    setSelectedDate('');\r\n                    setSelectedTime('');\r\n                    setBusySlots([]);\r\n                  }}\r\n                >\r\n                  <span className=\"service-icon\">{service.icon}</span>\r\n                  <h4>{service.name}</h4>\r\n                  <span className=\"service-duration\">{service.duration} min</span>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Selección de empleado */}\r\n          {selectedService && (\r\n            <div className=\"form-section\">\r\n              <label>Selecciona el profesional:</label>\r\n              {employees[selectedService]?.length === 0 ? (\r\n                <div className=\"no-employees\">\r\n                  <p>No hay profesionales disponibles para este servicio</p>\r\n                </div>\r\n              ) : (\r\n                <div className=\"employee-options\">\r\n                  {employees[selectedService]?.map(employee => (\r\n                    <div\r\n                      key={employee.id}\r\n                      className={`employee-card ${selectedEmployee === employee.id ? 'selected' : ''}`}\r\n                      onClick={() => {\r\n                        setSelectedEmployee(employee.id);\r\n                        setSelectedDate('');\r\n                        setSelectedTime('');\r\n                        setBusySlots([]);\r\n                      }}\r\n                    >\r\n                      <div className=\"employee-info\">\r\n                        <h4>{employee.name}</h4>\r\n                        <span className=\"specialty\">{employee.specialty}</span>\r\n                        <div className=\"rating\">\r\n                          ⭐ {employee.rating}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  )) || []}\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n\r\n          {/* Selección de fecha */}\r\n          {selectedEmployee && (\r\n            <div className=\"form-section\">\r\n              <label>Selecciona la fecha:</label>\r\n              <div className=\"date-options\">\r\n                {getAvailableDates().map(date => {\r\n                  const formattedDate = formatDate(date);\r\n                  return (\r\n                    <button\r\n                      key={date}\r\n                      className={`date-btn ${selectedDate === date ? 'selected' : ''}`}\r\n                      onClick={() => {\r\n                        setSelectedDate(date);\r\n                        setSelectedTime('');\r\n                      }}\r\n                      title={formattedDate.full}\r\n                    >\r\n                      <div className=\"date-content\">\r\n                        <span className=\"date-day\">{formattedDate.day}</span>\r\n                        <span className=\"date-number\">{formattedDate.date}</span>\r\n                        <span className=\"date-month\">{formattedDate.month}</span>\r\n                      </div>\r\n                    </button>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Selección de hora */}\r\n          {selectedDate && (\r\n            <div className=\"form-section\">\r\n              <label>Selecciona la hora:</label>\r\n              <div className=\"time-options\">\r\n                {timeSlots.map(time => (\r\n                  <button\r\n                    key={time}\r\n                    className={`time-btn ${selectedTime === time ? 'selected' : ''} ${!isTimeSlotAvailable(time) ? 'unavailable' : ''}`}\r\n                    onClick={() => setSelectedTime(time)}\r\n                    disabled={!isTimeSlotAvailable(time)}\r\n                  >\r\n                    {time}\r\n                  </button>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Botón de confirmar */}\r\n          {selectedService && selectedEmployee && selectedDate && selectedTime && (\r\n            <div className=\"form-section\">\r\n              <button \r\n                className=\"confirm-btn\" \r\n                onClick={handleBookAppointment}\r\n                disabled={loading}\r\n              >\r\n                {loading ? 'Agendando...' : 'Confirmar Cita'}\r\n              </button>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Lista de citas */}\r\n        <div className=\"appointments-list\">\r\n          <h3>Mis Citas ({appointments.length})</h3>\r\n          {appointments.length === 0 ? (\r\n            <div className=\"no-appointments\">\r\n              <p>No tienes citas agendadas</p>\r\n            </div>\r\n          ) : (\r\n            <div className=\"appointments\">\r\n              {appointments.map(appointment => (\r\n                <div key={appointment._id || appointment.id} className=\"appointment-card\">\r\n                  <div className=\"appointment-header\">\r\n                    <span className=\"service-icon\">\r\n                      {services.find(s => s.id === appointment.serviceType)?.icon || '📅'}\r\n                    </span>\r\n                    <div className=\"appointment-info\">\r\n                      <h4>{appointment.serviceName}</h4>\r\n                      <span className=\"employee-name\">con {appointment.employee?.name}</span>\r\n                    </div>\r\n                    {appointment.status !== 'cancelled' && (\r\n                      <button \r\n                        className=\"cancel-btn\"\r\n                        onClick={() => cancelAppointment(appointment._id || appointment.id)}\r\n                        disabled={loading}\r\n                      >\r\n                        ✕\r\n                      </button>\r\n                    )}\r\n                  </div>\r\n                  \r\n                  <div className=\"appointment-details\">\r\n                    <div className=\"detail-item\">\r\n                      <span className=\"detail-label\">📅 Fecha:</span>\r\n                      <span className=\"detail-value\">{formatDate(appointment.date).full}</span>\r\n                    </div>\r\n                    <div className=\"detail-item\">\r\n                      <span className=\"detail-label\">🕐 Hora:</span>\r\n                      <span className=\"detail-value\">{appointment.time}</span>\r\n                    </div>\r\n                    <div className=\"detail-item\">\r\n                      <span className=\"detail-label\">⏱️ Duración:</span>\r\n                      <span className=\"detail-value\">{appointment.serviceDuration} min</span>\r\n                    </div>\r\n                    <div className=\"detail-item\">\r\n                      <span className=\"detail-label\">📊 Estado:</span>\r\n                      <span className={`status ${appointment.status}`}>\r\n                        {getStatusDisplay(appointment.status)}\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AppointmentBooking;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}